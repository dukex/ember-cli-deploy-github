---
language: node_js
node_js:
  - "0.12"
  - "iojs"

cache:
  directories:
    - node_modules

matrix:
  fast_finish: true

before_install:
  - export PATH=/usr/local/phantomjs-2.0.0/bin:$PATH
  - "npm config set spin false"
  - "npm install -g npm@^2"
  - sudo add-apt-repository -y ppa:ubuntu-toolchain-r/test;
  - sudo apt-get update;
  - sudo apt-get install gcc-4.9 g++-4.9 lcov;
  - sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-4.9 20;
  - sudo update-alternatives --install /usr/bin/g++ g++ /usr/bin/g++-4.9 20;
  - sudo update-alternatives --install /usr/bin/gcov gcov /usr/bin/gcov-4.9 20;
  - sudo update-alternatives --config gcc;
  - sudo update-alternatives --config g++;
  - sudo update-alternatives --config gcov;
  - wget http://downloads.sourceforge.net/ltp/lcov-1.10.tar.gz;
  - tar xvfz lcov-1.10.tar.gz;
  - sudo cp -v lcov-1.10/bin/{lcov,genpng,gendesc,genhtml,geninfo} /usr/bin/;
  - rm -rf lcov-1.10.tar.gz lcov-1.10;

install:
  - npm install

script:
  - npm test
